<% @page_title = "Create Firewall" %>

<div class="space-y-1">
  <%== render(
    "components/breadcrumb",
    locals: {
      back: "#{@project_data[:path]}/firewall",
      parts: [
        %w[Projects /project],
        [@project_data[:name], @project_data[:path]],
        ["Firewalls", "#{@project_data[:path]}/firewall"],
        %w[Create #]
      ]
    }
  ) %>
  <%== render("components/page_header", locals: { title: "Create Firewall" }) %>
</div>

<%
  form_elements = [
    {name: "name", type: "text", label: "Name", required: true, placeholder: "Enter name"},
    {name: "description", type: "text", label: "Description", required: true, placeholder: "Enter description"},
    {name: "location", type: "radio_small_cards", label: "Location", required: true, content_generator: ContentGenerator::Vm.method(:location)},
    {name: "private_subnet_id", type: "select", label: "Private Subnet", placeholder: "Select private subnet", content_generator: ContentGenerator::Vm.method(:private_subnet)},
  ]

  option_tree, option_parents = Project[@project_data[:id]].generate_firewall_options(account: current_account)
  action = "#{@project_data[:path]}/firewall"
%>

<%==render("components/form/resource_creation_form", locals: {action:, form_elements:, option_tree:, option_parents:})%>
